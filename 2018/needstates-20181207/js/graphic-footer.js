var DEFAULT_WIDTH=600;var MOBILE_THRESHOLD=500;var fmtComma=d3.format(',');var fmtYearAbbrev=d3.time.format('%y');var fmtYearFull=d3.time.format('%Y');var fmtMonthNum=d3.time.format('%m');var formatFullDate=function(d){var fmtDayYear=d3.time.format('%e, %Y');return getAPMonth(d)+' '+fmtDayYear(d).trim();};
var pymChild=null;var isMobile=false;var onWindowLoaded=function(){if(Modernizr.svg)pymChild=new pym.Child({renderCallback:render});else pymChild=new pym.Child({});pymChild.onMessage('on-screen',function(bucket){ANALYTICS.trackEvent('on-screen',bucket);});pymChild.onMessage('scroll-depth',function(data){data=JSON.parse(data);ANALYTICS.trackEvent('scroll-depth',data.percent,data.seconds);});};var render=function(containerWidth){if(!containerWidth)containerWidth=DEFAULT_WIDTH;if(containerWidth<=MOBILE_THRESHOLD)isMobile=true;else isMobile=false;if(pymChild)pymChild.sendHeight();};var renderGraphic=function(config){var aspectWidth=4;var aspectHeight=3;var margins={top:0,right:15,bottom:20,left:15};var chartWidth=config.width-margins.left-margins.right;var chartHeight=Math.ceil((config.width*aspectHeight)/aspectWidth)-margins.top-margins.bottom;var containerElement=d3.select(config.container);containerElement.html('');var chartElement=containerElement.append('svg').attr('width',chartWidth+margins.left+margins.right).attr('height',chartHeight+margins.top+margins.bottom).append('g').attr('transform','translate('+margins.left+','+margins.top+')');};window.onload=onWindowLoaded;