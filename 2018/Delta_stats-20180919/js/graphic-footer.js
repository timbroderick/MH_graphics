var pymChild=null;var isMobile=false;var onWindowLoaded=function(){pymChild=new pym.Child({});pymChild.onMessage('on-screen',function(bucket){ANALYTICS.trackEvent('on-screen',bucket);});pymChild.onMessage('scroll-depth',function(data){ANALYTICS.trackEvent('scroll-depth',data.percent,data.seconds);});};var artboardResizer=function(){if(document.documentElement.className.indexOf('g-resizer-v3-init')>-1)return;document.documentElement.className+=' g-resizer-v3-init';if(!('querySelector' in document))return;function resizer(){var elements=Array.prototype.slice.call(document.querySelectorAll('.g-artboard[data-min-width]')),widthById={};elements.forEach(function(el){var parent=el.parentNode,width=widthById[parent.id]||parent.getBoundingClientRect().width,minwidth=el.getAttribute('data-min-width'),maxwidth=el.getAttribute('data-max-width');widthById[parent.id]=width;if(+minwidth<=width&&(+maxwidth>=width||maxwidth===null))el.style.display='block';else el.style.display='none';});try{if(window.parent&&window.parent.$)window.parent.$('body').trigger('resizedcontent',[window]);if(window.require)require(['foundation/main'],function(){require(['shared/interactive/instances/app-communicator'],function(AppCommunicator){AppCommunicator.triggerResize();});});}catch(e){console.log(e);}pymChild.sendHeight();}document.addEventListener('DOMContentLoaded',resizer);window.addEventListener('resize',_.throttle(resizer,200));};window.onload=onWindowLoaded;
var CartoDB=L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png',{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:'abcd',maxZoom:19});var CartoDB2=L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png',{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:'abcd',maxZoom:19});var map=L.map('graphic');var map2=L.map('graphic2');$.getJSON("js/delta_stats.json",function(data){geojson=L.geoJson(data,{style:function(feature){return{fillColor:getColor(feature.properties.median),weight:1,opacity:1,color:'white',dashArray:'',fillOpacity:0.8};},onEachFeature:function(feature,layer){layer.bindPopup('<h5><strong>'+feature.properties.Geography+'</strong></h5><table class="mapTable table-hover table-striped table-condensed"><tbody><tr><td><strong>Median income: </strong></td><td>$'+feature.properties.median+'</td></tr></tbody></table>',{maxWidth:210});}});function getColor(d){return d>40239?'#028575':d>36385?'#97D5C9':d>33021?'#FFF9B8':d>29855?'#FECF8D':d>0?'#FAA634':'#FFFFFF';}map.setView(new L.LatLng(32.6,-90),6);geojson.addTo(map);map.addLayer(CartoDB);geojson2=L.geoJson(data,{style:function(feature){return{fillColor:getColor2(feature.properties.poverty),weight:1,opacity:1,color:'white',dashArray:'',fillOpacity:0.8};},onEachFeature:function(feature,layer){layer.bindPopup('<h5><strong>'+feature.properties.Geography+'</strong></h5><table class="mapTable table-hover table-striped table-condensed"><tbody><tr><td><strong>% poverty level: </strong></td><td>'+feature.properties.poverty+'%</td></tr></tbody></table>',{maxWidth:210});}});function getColor2(d){return d>26?'#FAA634':d>20?'#FECF8D':d>18?'#FFF9B8':d>15?'#97D5C9':d>0?'#028575':'#FFFFFF';}map2.setView(new L.LatLng(32.6,-90),6);geojson2.addTo(map2);map2.addLayer(CartoDB2);});